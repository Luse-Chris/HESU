<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="0">

        <record model="ir.module.category" id="module_management">
            <field name="name">TENMET Payment Requisition</field>
            <field name="description">Manage Payment Requisitions, Approvals, Payments</field>
            <field name="sequence">9</field>
        </record>

<!--        Group Approver-->
        <record model="res.groups" id="group_approver">
            <field name="name">Approver</field>
            <field name="category_id" ref="module_management"/>
        </record>

<!--        Group Accountant-->
        <record model="res.groups" id="group_accountant">
            <field name="name">Accountant</field>
            <field name="category_id" ref="module_management"/>
        </record>

<!--        Group Administrator-->
        <record model="res.groups" id="group_administrator">
            <field name="name">Administrator</field>
            <field name="category_id" ref="module_management"/>
            <field name="implied_ids" eval="[(4, ref('tenmet_payment_requisition.group_accountant'))]"/>
        </record>

         <record model="ir.rule" id="requisitions_own_record">
            <field name="name">User Sees Own records</field>
            <field name="model_id" ref="model_payment_requisition"/>
             <field name="groups" eval="[(4, ref('base.group_user'))]"/>
            <field name="domain_force">[('create_uid','=',user.id)]</field>
        </record>

        <record model="ir.rule" id="authorizer_sees_all_records">
            <field name="name">Authorizer Sees all Submitted Records for Him to Authorize</field>
            <field name="model_id" ref="model_payment_requisition"/>
            <field name="groups" eval="[(4, ref('tenmet_payment_requisition.group_approver'))]"/>
            <field name="domain_force">[(1, '=', 1), ('state', 'in', ('submitted','authorized')), ('authorizer_id','=', user.id)]</field>
        </record>

        <record model="ir.rule" id="certifier_sees_all_records">
            <field name="name">Certifier Sees all Authorized Records for Him to Certify</field>
            <field name="model_id" ref="model_payment_requisition"/>
            <field name="groups" eval="[(4, ref('tenmet_payment_requisition.group_approver'))]"/>
            <field name="domain_force">[(1, '=', 1), ('state', 'in', ('authorized','certified')), ('certifier_id','=', user.id)]</field>
        </record>

        <record model="ir.rule" id="approver_sees_all_records">
            <field name="name">Approver Sees all Certified Records for Him to Approve</field>
            <field name="model_id" ref="model_payment_requisition"/>
            <field name="groups" eval="[(4, ref('tenmet_payment_requisition.group_approver'))]"/>
            <field name="domain_force">[(1, '=', 1), ('state', 'in', ('certified','approved')), ('approver_id','=', user.id)]</field>
        </record>

        <record model="ir.rule" id="admin_sees_all_approved_records">
            <field name="name">Admin Sees all Approved Records for Him to Post</field>
            <field name="model_id" ref="model_payment_requisition"/>
            <field name="groups" eval="[(4, ref('tenmet_payment_requisition.group_administrator'))]"/>
            <field name="domain_force">[(1, '=', 1), ('state', 'in', ('approved','posted','rejected'))]</field>
        </record>

        <record model="ir.rule" id="accounts_sees_all_posted_records">
            <field name="name">Accountant Sees all Posted Records for Him to Pay</field>
            <field name="model_id" ref="model_payment_requisition"/>
            <field name="groups" eval="[(4, ref('tenmet_payment_requisition.group_accountant'))]"/>
            <field name="domain_force">[(1, '=', 1), ('state', 'in', ('approved','posted'))]</field>
        </record>

    </data>
</odoo>
